<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirit's Prompting: The Gifts Match</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
        }
        .game-container {
            max-width: 900px;
            width: 100%;
            background-color: #fff;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
            border-top: 8px solid #E54949; /* Red for the Holy Spirit */
            padding: 2rem;
        }
        .gift-button {
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            border: 2px solid transparent;
        }
        .gift-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .gift-button:active {
            transform: translateY(0);
        }
        .correct-answer {
            background-color: #10B981 !important; /* Tailwind Green-500 */
            color: white !important;
            border-color: #059669 !important;
        }
        .wrong-answer {
            background-color: #EF4444 !important; /* Tailwind Red-500 */
            color: white !important;
            border-color: #DC2626 !important;
        }
        /* Style for the justification text */
        #justification-text {
            border-left: 4px solid #F59E0B; /* Tailwind Amber-500 */
        }
    </style>
</head>
<body>

<div class="game-container">
    <!-- Header -->
    <header class="text-center mb-8">
        <div class="text-5xl mb-2">üïäÔ∏èüî•</div>
        <h1 class="text-3xl font-extrabold text-gray-800">Spirit's Prompting</h1>
        <p class="text-lg text-gray-600">Match the scenario to the correct Gift of the Holy Spirit.</p>
    </header>

    <!-- Score and Progress -->
    <div id="score-container" class="flex justify-between items-center mb-6 p-4 bg-gray-100 rounded-lg">
        <p class="text-xl font-semibold text-gray-700">Score: <span id="current-score" class="text-red-600">0</span> / <span id="total-questions"></span></p>
        <button id="restart-button" onclick="restartGame()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition duration-150 ease-in-out hidden">
            Restart Game
        </button>
    </div>

    <!-- Scenario Display -->
    <div id="scenario-card" class="bg-red-50 p-6 rounded-xl border border-red-200 mb-8 min-h-[120px] flex items-center justify-center">
        <p id="scenario-text" class="text-2xl font-semibold text-gray-800 text-center">
            <!-- Scenario will be loaded here -->
        </p>
    </div>

    <!-- Gift Buttons -->
    <div id="gift-buttons-container" class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
        <!-- Buttons will be generated by JavaScript -->
    </div>

    <!-- Feedback and Justification -->
    <div id="feedback-container" class="min-h-[100px]">
        <p id="feedback-text" class="text-center text-xl font-bold mb-4"></p>
        <div id="justification-text" class="p-4 bg-yellow-50 rounded-lg text-gray-700 text-sm italic hidden">
            <!-- Justification will be displayed here -->
        </div>
    </div>
    
    <!-- Next Button (New Addition) -->
    <div class="text-center mt-6">
        <button id="next-button" onclick="nextQuestion()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-xl transition duration-150 ease-in-out hidden text-lg">
            Next Question &rarr;
        </button>
    </div>


</div>

<!-- Tailwind Fix: Forces CDN script to include dynamically used classes -->
<div class="hidden bg-amber-600 hover:bg-amber-700 bg-blue-600 hover:bg-blue-700 bg-green-600 hover:bg-green-700 bg-red-600 hover:bg-red-700 bg-purple-600 hover:bg-purple-700 bg-pink-600 hover:bg-pink-700 bg-indigo-600 hover:bg-indigo-700"></div>

<script>
    // Data Structure for the Gifts and Scenarios
    const GIFTS = [
        { name: "Wisdom", color: "amber" },
        { name: "Understanding", color: "blue" },
        { name: "Counsel", color: "green" },
        { name: "Fortitude", color: "red" },
        { name: "Knowledge", color: "purple" },
        { name: "Piety", color: "pink" },
        { name: "Fear of the Lord", color: "indigo" }
    ];

    const SCENARIOS = [
        {
            scenario: "You are asked to speak in front of the whole school about your faith, and even though you are nervous, you agree because you know it's right.",
            gift: "Fortitude",
            justification: "Fortitude (Courage) gives you the strength and resolve to stand up for your faith and moral truth, even when it is difficult or frightening."
        },
        {
            scenario: "You look up at the night sky full of stars or see a massive waterfall and are completely stunned by how amazing and powerful God is.",
            gift: "Fear of the Lord",
            justification: "Fear of the Lord (Wonder and Awe) is a sense of profound respect and humble wonder at God's goodness and power, which moves us to avoid offending Him."
        },
        {
            scenario: "A friend is struggling with whether to cheat on a test. You clearly explain why cheating is wrong and suggest they talk to the teacher instead.",
            gift: "Counsel",
            justification: "Counsel (Right Judgment) helps you to quickly and correctly judge what is right and wrong in a situation, enabling you to make and give good, moral decisions."
        },
        {
            scenario: "Your parents tell you that money is tight, so you happily choose to donate your birthday money to the poor instead of buying a new video game.",
            gift: "Knowledge",
            justification: "Knowledge helps you see the true value of created things in relation to God. It allows you to prioritize spiritual and eternal good (charity) over temporary, material pleasures."
        },
        {
            scenario: "You are reading a complicated Bible verse about the Eucharist, and suddenly, you have a deep, spiritual realization of what Jesus meant.",
            gift: "Understanding",
            justification: "Understanding allows you to comprehend the deeper truths of our faith (like Scripture or Sacraments), going beyond surface-level facts to grasp the divine meaning."
        },
        {
            scenario: "You treat the altar in the church with deep respect and always say a prayer before receiving the Eucharist, recognizing Christ's presence.",
            gift: "Piety",
            justification: "Piety (Reverence) gives you deep, loving respect and loyalty for God, His holy objects (like the altar), and all people as children of God."
        },
        {
            scenario: "You have a disagreement with a friend, and instead of just yelling, you pause and ask yourself, 'How would Jesus want me to handle this?'",
            gift: "Wisdom",
            justification: "Wisdom helps you see things, people, and situations with God's eyes. It directs your judgments and actions toward what is most important and purposeful in light of eternity."
        },
        {
            scenario: "You are tempted to skip Sunday Mass to go to a fun event, but you choose the Mass because you know your soul needs God's grace more than anything.",
            gift: "Wisdom",
            justification: "Wisdom helps you discern and judge that your spiritual life and relationship with God are the most valuable things, making the correct choice based on divine truth."
        },
        {
            scenario: "A person on the street asks you for directions, and you realize they seem lost and confused. You take the time to compassionately walk them part of the way to ensure they get there safely.",
            gift: "Understanding",
            justification: "Understanding helps you feel compassionate awareness of what others are experiencing, enabling you to respond with deep empathy and charity."
        },
        {
            scenario: "You witness a school bully picking on a student who has difficulty speaking. You firmly step in and tell the bully to stop, even though they are much bigger than you.",
            gift: "Fortitude",
            justification: "Fortitude (Courage) is the virtue that gives you the spiritual strength to overcome fear and stand up for justice and the vulnerable, fulfilling your duty to God and neighbor."
        }
    ].sort(() => Math.random() - 0.5); // Shuffle scenarios

    let currentQuestionIndex = 0;
    let score = 0;
    let totalQuestions = SCENARIOS.length;
    let isGameActive = true;

    // DOM Elements
    const scenarioText = document.getElementById('scenario-text');
    const scoreText = document.getElementById('current-score');
    const totalQuestionsText = document.getElementById('total-questions');
    const giftButtonsContainer = document.getElementById('gift-buttons-container');
    const feedbackText = document.getElementById('feedback-text');
    const justificationText = document.getElementById('justification-text');
    const restartButton = document.getElementById('restart-button');
    const nextButton = document.getElementById('next-button'); // New element reference

    function initializeGame() {
        totalQuestionsText.textContent = totalQuestions;
        renderGiftButtons();
        loadScenario();
    }

    function renderGiftButtons() {
        giftButtonsContainer.innerHTML = '';
        GIFTS.forEach(gift => {
            const button = document.createElement('button');
            button.id = `btn-${gift.name.replace(/\s/g, '-')}`;
            // Use bg-color-600 for a slightly darker button color for better contrast
            button.className = `gift-button w-full px-4 py-3 rounded-xl bg-${gift.color}-600 text-white font-bold text-lg hover:bg-${gift.color}-700`;
            button.textContent = gift.name;
            button.onclick = () => checkAnswer(gift.name);
            giftButtonsContainer.appendChild(button);
        });
    }

    function loadScenario() {
        if (currentQuestionIndex >= totalQuestions) {
            endGame();
            return;
        }

        const currentScenario = SCENARIOS[currentQuestionIndex];
        scenarioText.textContent = currentScenario.scenario;
        feedbackText.textContent = '';
        justificationText.classList.add('hidden');
        nextButton.classList.add('hidden'); // Hide next button
        resetButtonStyles();
        isGameActive = true;
    }

    function resetButtonStyles() {
        GIFTS.forEach(gift => {
            const button = document.getElementById(`btn-${gift.name.replace(/\s/g, '-')}`);
            if (button) {
                // Reset to base style, using dynamic Tailwind classes (bg-color-600)
                const baseClass = `gift-button w-full px-4 py-3 rounded-xl text-white font-bold text-lg`;
                const newBg = `bg-${gift.color}-600 hover:bg-${gift.color}-700`;
                button.className = `${baseClass} ${newBg}`;
                button.disabled = false;
            }
        });
    }

    function checkAnswer(selectedGift) {
        if (!isGameActive) return;
        isGameActive = false; // Disable clicks

        const currentScenario = SCENARIOS[currentQuestionIndex];
        const correctGift = currentScenario.gift;
        const selectedButton = document.getElementById(`btn-${selectedGift.replace(/\s/g, '-')}`);
        const correctButton = document.getElementById(`btn-${correctGift.replace(/\s/g, '-')}`);

        // Disable all buttons
        Array.from(giftButtonsContainer.children).forEach(btn => btn.disabled = true);

        // Display Justification
        justificationText.textContent = currentScenario.justification;
        justificationText.classList.remove('hidden');

        if (selectedGift === correctGift) {
            score++;
            scoreText.textContent = score;
            feedbackText.textContent = "Correct! The Spirit is prompting you well.";
            feedbackText.className = 'text-center text-xl font-bold mb-4 text-green-600';
            selectedButton.classList.add('correct-answer');
        } else {
            feedbackText.textContent = `Incorrect. You chose ${selectedGift}.`;
            feedbackText.className = 'text-center text-xl font-bold mb-4 text-red-600';
            selectedButton.classList.add('wrong-answer');
            // Highlight the correct answer
            correctButton.classList.add('correct-answer');
        }

        // Show the Next Question button
        nextButton.classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestionIndex++;
        loadScenario();
    }

    function endGame() {
        scenarioText.textContent = "Game Over!";
        feedbackText.textContent = `You finished the quiz! Your final score is ${score} out of ${totalQuestions}.`;
        feedbackText.className = 'text-center text-2xl font-extrabold mb-4 text-red-700';
        justificationText.classList.add('hidden');
        giftButtonsContainer.innerHTML = `<p class="text-center text-xl p-4 bg-gray-100 rounded-lg">Pray to the Holy Spirit to increase these gifts in your life!</p>`;
        restartButton.classList.remove('hidden');
        nextButton.classList.add('hidden'); // Ensure next button is hidden at the end
    }

    function restartGame() {
        // Shuffle the scenarios again
        SCENARIOS.sort(() => Math.random() - 0.5);
        currentQuestionIndex = 0;
        score = 0;
        scoreText.textContent = score;
        restartButton.classList.add('hidden');
        initializeGame();
    }

    // Initialize the game when the page loads
    window.onload = initializeGame;

</script>

</body>
</html>
